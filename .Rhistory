library(rjosnio)
library(rjsonio)
install.packages('rjsonio')
install.packages('RJSONIO')
library(RJSONIO)
library(help=RJSONIO)
help(toJSON)
hri<-read.table('hri_results.csv,sep=' ',header=T,dec='.'')
hri<-read.table('hri_results.csv,sep=' ',header=T,dec='.')
hri<-read.table('hri_results.csv',sep=' ',header=T,dec='.')
head(hri)
#hri2[,]
names(hri)
hri2[,seq(13,29,2)]
hri2<-hri[,seq(13,29,2)]
names(hri2)
head(hri2)
toJSON(hri2)
toJSON(hri2[1:3,])
toJSON(hri2[1:3,],file='data.json')
help(toJSON)
toJSON(hri2[1:3,])
cat(toJSON(hri2[1:3,]))
sink('data.json')
cat(toJSON(hri2[1:3,]))
sink()
q()
library(RJSONIO)
modified <- list(
  traits = colnames(hri2[1:3,]),
  values = unname(apply(tmp, 1, function(x) as.data.frame(t(x))))
)
cat(toJSON(modified))
library(RJSONIO)
modified <- list(
  traits = colnames(hri2[1:3,]),
  values = unname(apply(hri2[1:3,], 1, function(x) as.data.frame(t(x))))
)
cat(toJSON(modified))
library(RJSONIO)
modified <- list(
  axis = colnames(hri2[1:3,]),
  value = unname(apply(hri2[1:3,], 1, function(x) as.data.frame(t(x))))
)
cat(toJSON(modified))
sink('data.json')
cat(toJSON(modified))
sink()
q()
ls()
hri2
dim(hri2)
library(plyr)
library(help=plyr)
help(ddply)
head(hri2)
ddply(hri2)
ddply(hri2,.)
ddply(hri2,.~)
ddply(hri2,~.)
help(ddply)
library(reshape)
library(reshape2)
install.packages('reshape')
install.packages('reshape2')
library(help=reshape)
melt(hri2)
library(reshape)
melt(hri2)
head(melt(hri2))
head(hri)
hri2<-hri[,c(2,seq(13,29,2))]
head(hri2)
melt(hri2,'wdaid')
melt(hri2,'wdpaid')
melt(hri2[1:3],'wdpaid')
q()
library(JSONIO)
library(RJSONIO)
library(reshape)
hri2
ls()
hri3<-melt(hri2[1:3],'wdpaid')
hri3
unique(hri3$wdpaid)
hri3<-melt(hri2[1:3,],'wdpaid')
hri3
unique(hri3$wdpaid)
names(hr3)<-c('className','axis','value')
modified <- list(
  axis = colnames(hri3),
  value = unname(apply(hri3, 1, function(x) as.data.frame(t(x))))
)
modified
names(hr3)<-c('className','axis','value')
names(hri3)<-c('className','axis','value')
modified <- list(
  axes = colnames(hri3),
  value = unname(apply(hri3, 1, function(x) as.data.frame(t(x))))
)
modified
sink('data.json')
cat(toJSON(modified))
sink()
sink('data.json')
cat(toJSON(hri3))
sink()
modified <- list(
  axes = colnames(hri3),
  value = unname(apply(hri3, 1, function(x) as.data.frame(t(x))))
)
cat(toJSON(modified))
modified <- list(
  axes = colnames(hri3),
  value = unname(by(hri3, className, function(x) as.data.frame(t(x))))
)
by(hri3,className,sum)
by(hri3,hri3$className,sum)
help(by)
help(unname)
lapply(hri3,className,as.data.frame(t(x)))
help(lapply)
head(hri3
)
hri2
hri2[1,]
t(hri2[1,])
cat(toJSON(t(hri2[1,])))
cat(toJSON(t(hri2[1,-1])))
cat(toJSON(as.data.frame(t(hri2[1,-1]))))
as.data.frame(t(hri2[1,-1]))
as.data.frame(t(hri2[1,-1]))->df
df
names(df)<-c('axis','value')
dim(df)
df[,2]<-rownames(df)
df
names(df)<-c('axis','value')
df
names(df)<-c('value','axis')
df
cat(toJSON(df))
library(RJSONIO)
library(plyr)
modified <- list(
  axes = colnames(df),
  values = unname(alply(df, 1, identity))
)
cat(toJSON(modified))
hri3
library(RJSONIO)
library(plyr)
modified <- list(
  axes = colnames(hri3),
  values = unname(alply(hri3, 1, identity))
)
cat(toJSON(modified))
hr2
hri2
modified <- list(
  axes = colnames(hri2[1:3,]),
  values = unname(alply(hri2[1:3,], 1, identity))
)
cat(toJSON(modified))
modified <- list(
#  axes = colnames(hri2[1:3,]),
  values = unname(alply(hri2[1:3,], 1, identity))
)
cat(toJSON(modified))
modified <- list(
#  axes = colnames(hri2[1:3,]),
  values = alply(hri2[1:3,], 1, identity)
)
cat(toJSON(modified))
modified
modified <- list(
  axes = colnames(hri2[1:3,]),
  values = unname(alply(hri2[1:3,], 1, identity))
)
modified
modified <- list(
  axes = colnames(hri2[1:3,]),
  values = alply(hri2[1:3,], 1, identity)
)
modified <- list(
modified <- list(
  axes = colnames(hri2[1:3,]),
  values = alply(hri2[1:3,], 1, identity)
)
modified
hri2
rownames(hri2)<-hri2$wdpaid
hri2
modified <- list(
  axes = colnames(hri2[1:3,-1]),
  values = alply(hri2[1:3,-1], 1, identity)
)
modified
cat(toJSON(modified))
modified <- list(
  axes = colnames(hri2[1:3,]),
  values = unname(alply(hri2[1:3,], 1, identity))
)
cat(toJSON(modified))
hri3
cat(toJSON(hri3))
#by(cat(toJSON(hri3))
by(hri3,className,toJSON)
by(hri3$value,className,toJSON)
help(by)
help(tapply)
help(simplify2array)
help(by)
help(with)
help(by)
hri3
by(hri3[,2:3],hri3$className,toJSON)
cat(by(hri3[,2:3],hri3$className,toJSON))
cat(by(hri3[,2:3],hri3$className,cat(toJSON)))
cat(by(hri3[,2:3],hri3$className,toJSON))
list(cat(by(hri3[,2:3],hri3$className,toJSON)))
lista <- list(cat(by(hri3[,2:3],hri3$className,toJSON)))
lista
lista <- list(by(hri3[,2:3],hri3$className,toJSON))
lista
cat(lista)
lista <- by(hri3[,2:3],hri3$className,toJSON)
lista
cat(lista)
lista <- by(hri3[,2:3],hri3$className,toJSON(t(x)))
lista <- by(hri3[,2:3],hri3$className,toJSON(t(hri3[,2:3])))
lista <- by(hri3[,2:3],hri3$className,function(x) toJSON(t(x)))
lista
cat(lista)
toJSONarray <- function(dtf){
clnms <- colnames(dtf)
name.value <- function(i){
quote <- '';
# if(class(dtf[, i])!='numeric'){
if(class(dtf[, i])!='numeric' && class(dtf[, i])!= 'integer'){ # I modified this line so integers are also not enclosed in quotes
quote <- '"';
}
paste('"', i, '" : ', quote, dtf[,i], quote, sep='')
}
objs <- apply(sapply(clnms, name.value), 1, function(x){paste(x, collapse=', ')})
objs <- paste('{', objs, '}')
# res <- paste('[', paste(objs, collapse=', '), ']')
res <- paste('[', paste(objs, collapse=',\n'), ']') # added newline for formatting output
return(res)
}
toJSONarray(hri3)
toJSONarray(hri3)->data
cat(data)
hri3
toJSONarray(hri2[1:3,])->data
cat(data)
toJSONarray(hri3[,-1])->data
cat(data)
hri3
by(hri3[-1],hri3$className,function(x )toJSONarray(x))
by(hri3[-1],hri3$className,function(x )toJSONarray(x))->data
cat(data)
by(hri3[-1],hri3$className,function(x )toJSONarray(x))->data
data
data[1]
list(by(hri3[-1],hri3$className,function(x )toJSONarray(x)))->data
data
length(data)
data[[1]]
data[[2]]
data[[3]]
data[[4]]
unname(by(hri3[-1],hri3$className,function(x )toJSONarray(x)))->data
data
data[1]
data[2]
data[3]
cat(data[1])
data[4]
names(data)
str(data)
data
by(hri3[-1],hri3$className,function(x )toJSONarray(x))->data
data
data[1]
data[2]
data[4]
data[3]
cat(data[1])
names(data[1])
names(data[1])
cat(data[1])
names(data[2])
cat(data[2])
list(data)
list(data)->data2
data
data2
q()
library(RJSONIO)
library(reshape)
hri<-read.table('hri_results.csv',sep=' ',header=T,dec='.')
hri2<-hri[,c(2,seq(13,29,2))]
hri3<-melt(hri2[1:3,],'wdpaid')
names(hri3)<-c('className','axis','value')
by(hri3[-1],hri3$className,function(x )toJSONarray(x))->data
names(data[1])
cat(data[1])
length(data)
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
print("var data = [")
print("{")
print(paste("className: '",names(data[i]),"',",sep='')
print("axes: [")
cat(data[i])
sink()
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
print("var data = [")
print("{")
print(paste("className: '",names(data[i]),"',",sep=''))
print("axes: [")
cat(data[i])
sink()
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
print("var data = [")
print("{")
print(paste("className: '",names(data[i]),"',",sep=''))
print("axes: [")
cat(data[i])
sink()
}
export_max_json<-function(){
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
print("var data = [")
print("{")
print(paste("className: '",names(data[i]),"',",sep=''))
print("axes: [")
cat(data[i])
sink()
}
}
export_max_json()
getwd()
parse("var data")
print(parse("var data"))
print(parse(paste("var data")))
parse(paste("var data"))
print(paste("var data"))
print("var data")
print('var data')
help(print)
print('var data',quote=FALSE)
export_max_json<-function(){
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
print("var data = [",quote=FALSE)
print("{",quote=FALSE)
print(paste("className: '",names(data[i]),"',",sep=''),quote=FALSE)
print("axes: [,",quote=FALSE)
cat(data[i])
sink()
}
}
export_max_json()
help(sink)
export_max_json<-function(){
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''),type = "message")
print("var data = [",quote=FALSE)
print("{",quote=FALSE)
print(paste("className: '",names(data[i]),"',",sep=''),quote=FALSE)
print("axes: [,",quote=FALSE)
cat(data[i])
sink()
}
}
export_max_json()
help(sink)
cat(''exit)
cat('exit')
cat('exit',quite=FALSE)
cat('exit',quote=FALSE)
export_max_json<-function(){
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
cat("var data = [")
cat("{")
cat(paste("className: '",names(data[i]),"',",sep=''))
cat("axes: [,")
cat(data[i])
sink()
}
}
export_max_json()
help(cat)
export_max_json<-function(){
for(i in length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
cat("var data = [",fill=TRUE)
cat("{",fill=TRUE)
cat(paste("className: '",names(data[i]),"',",sep=''),fill=TRUE)
cat("axes: [,",fill=TRUE)
cat(data[i])
sink()
}
}
export_max_json()
q()
export_max_json<-function(){
for(i in 1:length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
cat("var data = [",fill=TRUE)
cat("{",fill=TRUE)
cat(paste("className: '",names(data[i]),"',",sep=''),fill=TRUE)
cat("axes: [,",fill=TRUE)
cat(data[i])
sink()
}
}
export_max_json()
length(data)
1:length(date)
1:length(data)
export_max_json<-function(){
for (i in 1:length(data)){
sink(paste('data_max_',names(data[i]),sep=''))
cat("var data = [",fill=TRUE)
cat("{",fill=TRUE)
cat(paste("className: '",names(data[i]),"',",sep=''),fill=TRUE)
cat("axes: [,",fill=TRUE)
cat(data[i])
sink()
}
}
export_max_json()
q()
